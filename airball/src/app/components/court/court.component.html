<div class="court-container">
  <svg viewBox="35 0 560 480" class="basketball-court">
    <!-- Shooting sections layer -->
    <g class="shooting-sections">
      <!-- Short 2pt sections -->
      <path class="section-line" d="m 249.63,9.11 c -16.59,14.58 -25.45,32.63 -25.45,54.9 0,44.5 40.98,80.58 91.54,80.58 50.55,0 91.54,-36.07 91.54,-80.58 0,-22.28 -11.69,-40.33 -28.3,-54.92" fill="none" stroke="#000000" stroke-width="3" />
      <path class="section-line" d="m 260.17,129.22 -25.25,72.75" fill="none" stroke="#000000" stroke-width="3" />
      <path class="section-line" d="m 368.75,129.21 25.25,72.75" fill="none" stroke="#000000" stroke-width="3" />
      
      <!-- Long 2pt sections -->
      <path class="section-line" d="m 152.49,9.28 c -7.57,17.94 -8.19,32.88 -8.19,53.32 0,87.45 76.12,158.34 170.01,158.34 93.89,0 170.01,-70.89 170.01,-158.34 0,-20.36 -2.56,-35.58 -10.08,-53.46" fill="none" stroke="#000000" stroke-width="3" />
      <path class="section-line" d="m 174,152.21 -52.25,40.5" fill="none" stroke="#000000" stroke-width="3" />
      <path class="section-line" d="m 453.84,154.02 52.25,40.5" fill="none" stroke="#000000" stroke-width="3" />
      <path class="section-line" d="m 251.02,208.26 -21.92,68.59" fill="none" stroke="#000000" stroke-width="3" />
      <path class="section-line" d="m 375.68,209.41 21.92,68.59" fill="none" stroke="#000000" stroke-width="3" />
      
      <!-- 3pt section lines -->
      <path class="section-line" id="3ptline" d="m 94.2,9.68 c -1.78,75.6 -0.48,75.49 -1.33,128.91 -0.42,26.07 85.82,154.34 217.83,154.34 143.43,0 223.35,-125.23 223.72,-152.33 l 1.77,-131.13" fill="none" stroke="#000000" stroke-width="3" />
      <path class="section-line" d="M 121.5,192.46 H 48" fill="none" stroke="#000000" stroke-width="3" />
      <path class="section-line" d="M 580,193.96 H 506.5" fill="none" stroke="#000000" stroke-width="3" />
      <path class="section-line" d="M 193.04,467.77 237.59,278.26" fill="none" stroke="#000000" stroke-width="3" />
      <path class="section-line" d="M 431.89,468.89 387.34,279.38" fill="none" stroke="#000000" stroke-width="3" />
    </g>
    
    <!-- Interactive section regions -->
    @for (section of courtSections; track section.id) {
      <path 
        [attr.d]="section.path" 
        [attr.fill]="getSectionColor(section)"
        [class.breathing-section]="isSelected(section.id)"
        [style.--section-color]="getSectionBaseColor(section)"
        class="section-region"
        [attr.data-section]="section.id"
        (click)="handleSectionClick(section.id, $event)"
        (mouseenter)="onSectionMouseEnter(section.id)"
        (mouseleave)="onSectionMouseLeave()"
        (touchstart)="onSectionTouch($event, section.id)"
        (touchend)="$event.preventDefault()"
      />
    }
    
    <!-- Base court layer -->
    <g class="court-base">
      <!-- Court outline -->
      <rect fill="none" height="458.21" stroke="#F0F0F0" stroke-width="5" width="532.84" x="47.9" y="9.38" />
      
      <!-- Center circle -->
      <path d="M 379,467.57 C 379,432.70 350.74,404.44 315.87,404.44 281,404.44 252.74,432.70 252.74,467.57" fill="none" stroke="#F0F0F0" stroke-width="5" />
      
      <!-- Free throw circle -->
      <path d="m 248.87,195.71 c 0,36.72 29.76,66.48 66.48,66.48 36.72,0 66.48,-29.76 66.48,-66.48" fill="none" stroke="#F0F0F0" stroke-width="5" />
      <path d="m 381.83,195.71 c 0,-36.72 -29.76,-66.48 -66.48,-66.48 -36.72,0 -66.48,29.76 -66.48,66.48" fill="none" stroke="#F0F0F0" stroke-width="4" stroke-dasharray="16, 8" />
      
      <!-- Painted area -->
      <path d="M 230.68,9.46 V 194.90 h 168.27 V 9.46" fill="none" stroke="#F0F0F0" stroke-width="5" />
      
      <!-- Restricted area -->
      <path d="m 269.77,35.24 v 22.56 c 0,22.54 20.2,40.82 45.13,40.82 24.92,0 45.13,-18.27 45.13,-40.82 V 35.14" fill="none" stroke="#F0F0F0" stroke-width="4" />
      
      <!-- 3pt line -->
      <path d="m 93.99,9.53 c -1.78,75.6 -0.48,75.49 -1.33,128.91 -0.42,26.07 85.82,154.34 217.83,154.34 143.43,0 223.35,-125.23 223.72,-152.33 l 1.77,-131.13" fill="none" stroke="#F0F0F0" stroke-width="5" />
      
      <!-- Hoop -->
      <path d="M 314.56,38.60 314.41,33.93 M 329.4,53.08 c 0,-8.1 -6.56,-14.66 -14.66,-14.66 -8.1,0 -14.66,6.56 -14.66,14.66 0,8.1 6.56,14.66 14.66,14.66 8.1,0 14.66,-6.56 14.66,-14.66 z" fill="none" stroke="#F0F0F0" stroke-width="3" />
      <line fill="none" stroke="#F0F0F0" stroke-width="4" x1="286.87" x2="342.83" y1="33.89" y2="33.89" />
    </g>

    <!-- Section labels -->
    @for (section of courtSections; track section.id) {
      <g class="label-container">
        <!-- Background rectangle -->
        <rect 
          [attr.x]="section.labelX - 30"
          [attr.y]="section.labelY - 15" 
          width="60" 
          height="30" 
          rx="8" 
          ry="8" 
          class="label-background" 
          fill="rgba(70,70,70,0.6)" 
        />
        
        <!-- Make/Total stats -->
        <text 
          [attr.x]="section.labelX" 
          [attr.y]="section.labelY - 5" 
          font-size="13" 
          text-anchor="middle" 
          alignment-baseline="middle"
          fill="white"
          font-weight="500"
          pointer-events="none"
        >{{section.make}}/{{section.total}}</text>
        
        <!-- Percentage stats -->
        <text 
          [attr.x]="section.labelX" 
          [attr.y]="section.labelY + 8" 
          font-size="13" 
          text-anchor="middle" 
          alignment-baseline="middle"
          fill="white"
          font-weight="500"
          pointer-events="none"
        >{{section.percentage.toFixed(2)}}%</text>
      </g>
    }
  </svg>
</div>